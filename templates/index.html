<!DOCTYPE html>
<html lang="en">
{% include 'header.html' %}
<body>
    <input type="hidden" id="deleteSelectedUrl" value="{% url 'delete-selected-teachers' %}">
    <div class="container py-5">
        <h1 class="mb-4 text-center">Manage Teachers & Students</h1>

        <!-- Add / Delete Buttons -->
        <div class="d-flex justify-content-end mb-3">
            <!-- Add User -->
            <button
                type="button"
                class="btn btn-success me-2"
                data-bs-toggle="modal"
                data-bs-target="#addModal"
            >
                <i class="fa-solid fa-plus"></i> Add User
            </button>
            <!-- Delete Selected -->
            <button
                type="button"
                class="btn btn-danger"
                data-bs-toggle="modal"
                data-bs-target="#deleteSelectedModal"
            >
                <i class="fa-solid fa-trash"></i> Delete Selected
            </button>
        </div>

        <!-- Nav Tabs -->
        <ul class="nav nav-pills mb-4 justify-content-center" id="entityTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button
                    class="nav-link active"
                    id="teachers-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#teachers"
                    type="button"
                    role="tab"
                >Teachers</button>
            </li>
            <li class="nav-item" role="presentation">
                <button
                    class="nav-link"
                    id="students-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#students"
                    type="button"
                    role="tab"
                >Students</button>
            </li>
        </ul>

        <!-- Tab Contents -->
        <div class="tab-content" id="entityTabsContent">
            <!-- Teachers Table -->
            <div class="tab-pane fade show active" id="teachers" role="tabpanel">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th><input type="checkbox" id="selectAllTeachers"></th>
                            <th>Image</th>
                            <th>Name</th>
                            <th>Subject</th>
                            <th>Email</th>
                            <th>Phone</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                      {% for i in allTeachers %}
                        <tr>
                            <td><input type="checkbox" class="teacher-checkbox" data-id="{{i.id}}"></td>
                            <td>
                                {% if i.image %}
                                <img src="{{i.image.url}}" alt="Teacher Image" width="50" />
                                {% endif %}
                            </td>
                            <td>{{i.name}}</td>
                            <td>{{i.subject}}</td>
                            <td>{{i.email}}</td>
                            <td>{{i.phone}}</td>
                            <td class="text-center">
                                <a href="#" class="me-3 text-primary" data-bs-toggle="modal" data-bs-target="#editModal-{{forloop.counter}}"><i class="fa-solid fa-pen-to-square"></i></a>
                                <a href="#" class="text-danger" data-bs-toggle="modal" data-bs-target="#deleteSingleModal-{{forloop.counter}}"><i class="fa-solid fa-trash"></i></a>
                            </td>
                        </tr>
                      {% endfor %}
                    </tbody>
                </table>
            </div>

            <!-- Students Table -->
            <div class="tab-pane fade" id="students" role="tabpanel">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th><input type="checkbox" id="selectAllStudents"></th>
                            <th>Name</th>
                            <th>Email</th>
                            <th>Address</th>
                            <th>Phone</th>
                            <th class="text-center">Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="checkbox" class="student-checkbox"></td>
                            <td>Nurmita</td>
                            <td>nurmi123@example.com</td>
                            <td>Kota veedhi, Chodavaram, INDIA</td>
                            <td>+91 6364923546</td>
                            <td class="text-center">
                                <a href="#" class="me-3 text-primary" data-bs-toggle="modal" data-bs-target="#editModal"><i class="fa-solid fa-pen-to-square"></i></a>
                                <a href="#" class="text-danger" data-bs-toggle="modal" data-bs-target="#deleteSingleModal"><i class="fa-solid fa-trash"></i></a>
                            </td>
                        </tr>
                        <tr>
                            <td><input type="checkbox" class="student-checkbox"></td>
                            <td>Mrudhula</td>
                            <td>mrudhulakrishna@example.com</td>
                            <td>New market, Chodavaram, INDIA</td>
                            <td>+91 95723545</td>
                            <td class="text-center">
                                <a href="#" class="me-3 text-primary" data-bs-toggle="modal" data-bs-target="#editModal"><i class="fa-solid fa-pen-to-square"></i></a>
                                <a href="#" class="text-danger" data-bs-toggle="modal" data-bs-target="#deleteSingleModal"><i class="fa-solid fa-trash"></i></a>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Pagination -->
        <div class="d-flex justify-content-between align-items-center mt-3">
            <div class="hint-text">Showing <b>5</b> out of <b>25</b> entries</div>
            <ul class="pagination">
                <li class="page-item disabled"><a href="#" class="page-link">Previous</a></li>
                <li class="page-item"><a href="#" class="page-link">1</a></li>
                <li class="page-item"><a href="#" class="page-link">2</a></li>
                <li class="page-item active"><a href="#" class="page-link">3</a></li>
                <li class="page-item"><a href="#" class="page-link">4</a></li>
                <li class="page-item"><a href="#" class="page-link">5</a></li>
                <li class="page-item"><a href="#" class="page-link">Next</a></li>
            </ul>
        </div>
    </div>

    <!-- Add Modal -->
    <div class="modal fade" id="addModal" tabindex="-1" aria-labelledby="addModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addModalLabel">Add User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'add-teacher' %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-group mb-3">
                            <label>Name</label>
                            <input name="name" type="text" class="form-control" required />
                        </div>
                        <div class="form-group mb-3">
                            <label>Subject</label>
                            <input name="subject" type="text" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label>Email</label>
                            <input name="email" type="email" class="form-control" required />
                        </div>
                        <div class="form-group mb-3">
                            <label>Phone</label>
                            <input name="phone" type="text" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label>Image</label>
                            <input name="image" type="file" class="form-control" />
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-success">Add</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    {% for i in allTeachers %}
    <div class="modal fade" id="editModal-{{forloop.counter}}" tabindex="-1" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="editModalLabel">Edit User</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-hidden="true"></button>
                </div>
                <div class="modal-body">
                    <form action="{% url 'update-teacher' i.id %}" method="post" enctype="multipart/form-data">
                        {% csrf_token %}
                        <div class="form-group mb-3">
                            <label>Name</label>
                            <input type="text" name="name" value="{{i.name}}" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label>Subject</label>
                            <input type="text" name="subject" value="{{i.subject}}" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label>Email</label>
                            <input type="email" name="email" value="{{i.email}}" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label>Phone</label>
                            <input type="text" name="phone" value="{{i.phone}}" class="form-control" />
                        </div>
                        <div class="form-group mb-3">
                            <label>Image</label>
                            <input type="file" name="image" class="form-control" />
                        </div>
                        <div class="modal-footer">
                            <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                            <button type="submit" class="btn btn-primary">Save</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Delete Single Confirmation Modal -->
    {% for i in allTeachers %}
    <div class="modal fade" id="deleteSingleModal-{{forloop.counter}}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete this record?
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <a href="{% url 'delete-teacher' i.id %}" class="btn btn-danger">Delete</a>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}

    <!-- Delete Selected Confirmation Modal -->
    <div class="modal fade" id="deleteSelectedModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Confirm Bulk Delete</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    Are you sure you want to delete all selected records?
                </div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button class="btn btn-danger" id="confirmDeleteSelected">Delete Selected</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS Bundle -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="static/js/script.js"></script>
    
</body>
</html>
